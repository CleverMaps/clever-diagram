{"version":3,"file":"clever-diagram.min.js","sources":["../src/utils/Observable.js","../src/Component.js","../src/DiagramDefaults.js","../src/DiagramEdge.js","../src/DiagramEdges.js","../src/DiagramNode.js","../src/DiagramNodes.js","../src/Diagram.js"],"sourcesContent":["/**\n * @class\n * Observable class, handles binding and firing events\n * @param {Array} events list of events for this observable\n */\nexport default class Observable {\n    /**\n     * @param {Array} events\n     */\n    constructor(events = []) {\n        // create a map of handlers where each event has an array of bound handlers\n        this._handlers = events.reduce((acc, cur)=>{\n            acc[cur] = [];\n            return acc;\n        },{});\n    }\n\n    /**\n     * @public\n     * Bind event\n     * @param {String} event event name\n     * @param {Function} handler event handler\n     */\n    on(event, handler) {\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\n        this._handlers[event].push(handler);\n        return this;\n    }\n\n    /**\n     * @public\n     * Unbind event\n     * @param {String} event event name\n     * @param {Function} [handler] event handler, optional\n     */\n    off(event, handler) {\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\n        if (!handler) {\n            this._handlers[event] = [];\n        } else {\n            var handlers = this._handlers[event];\n            var index = handlers.indexOf(handler);\n            if (index != -1){\n                handlers.splice(index, 1);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * @public\n     * Add new event to be handled\n     * @param {String} event\n     */\n    add(event) {\n        if (!(event in this._handlers)) {\n            this._handlers[event] = [];\n        }\n        return this;\n    }\n\n    /**\n     * @public\n     * Fire widget event\n     * @param {String} event event name\n     * @param {*} ...args event arguments\n     */\n    fire(event, ...args) {\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\n        var handlers = this._handlers[event];\n        for (var i = 0; i < handlers.length; i++) {\n            handlers[i].apply(this, args);\n        }\n        return this;\n    }\n\n    /**\n     * @public\n     * Destroys this observable, removes events and so on\n     */\n    destroy() {\n        this._handlers = null;\n        return this;\n    }\n\n}","import Observable from \"./utils/Observable\";\nimport style from \"./CleverDiagram.css\";\nimport * as d3 from \"d3\";\n\nclass Component {\n\n    constructor(\n        className = \"component\"\n    ) {\n        this._container = null;\n        this._className = className;\n\n        this._observable = new Observable([\n            \"enter\",\n            \"leave\",\n            \"click\"\n        ]);\n\n        this._svg = null;\n    }\n\n    on(eventName, handler) {\n        this._observable.on(eventName, handler);\n        return this;\n    }\n\n    off(eventName, handler) {\n        this._observable.off(eventName, handler);\n        return this;\n    }\n\n    get className() {\n        return this._className;\n    }\n\n    get container() {\n        return this._container;\n    }\n\n    get observable() {\n        return this._observable;\n    }\n\n    _renderContainer(selector, x = 0, y = 0){\n\n        return d3.select(selector).append(\"g\")\n            .attr(\"class\", style[this.className])\n            .attr(\"transform\", `translate(${x}, ${y})`);\n\n    }\n\n    render(selector, x = 0, y = 0, index = 0){\n        this.destroy();\n\n        this._container = this._renderContainer(selector, x, y);\n\n        if (!this._container) {\n            throw `Component ${this._className} was not rendered. Check your selector: ${selector}`;\n        }\n\n        this._container.datum(index);\n\n        this._container\n            .on(\"click\", (index) => {\n                this._observable.fire(\"click\", index);\n            })\n            .on(\"mouseenter\", (index) => {\n                this._observable.fire(\"enter\", index);\n            })\n            .on(\"mouseleave\", (index) => {\n                this._observable.fire(\"leave\", index);\n            });\n\n        return this;\n    }\n\n    destroy(){\n        if (this.isRendered()) {\n            this.clearData();\n            this._container.datum(null);\n            this._container.remove();\n            this._container = null;\n        }\n        return this;\n    }\n\n    clearData() {\n        if (!this.isRendered()) {\n            throw \"Can't call clearData() when widget is not rendered, please call .render() first.\";\n        }\n        this._clearData();\n        this._data = null;\n        return this;\n    }\n\n    isRendered(){\n        return this._container !== null;\n    }\n\n    setData(data) {\n        if (!this.isRendered()) {\n            throw \"Can't call setData() when component is not rendered, please call .render() first.\";\n        }\n\n        return this._setData(this._container, data);\n    }\n}\n\nexport default Component;\n","\nexport const DIAGRAM_MARGIN = 50;\nexport const NODE_WIDTH = 190;\nexport const NODE_HEIGHT = 40;\nexport const NODE_GROUP_WIDTH = 40;\n\nexport const MOUSE_CONTROL = true;\n\nexport const ICON_FONT_SIZE = 18;\nexport const NODE_NAME_FONT_SIZE = 13;\n\nexport const NODE_ICON_COLOR = '#4a4a4a';\nexport const NODE_NAME_COLOR = '#4a4a4a';\nexport const NODE_DEFAULT_BG = 'rgba(255,255,255,1)';\nexport const NODE_SELECTED_BG = '#fff300';\nexport const NODE_MUTED_BG = '#f0f0f0';\nexport const NODE_GROUP_COLOR_DEFAULT = '#2196F3';\nexport const NODE_GROUP_COLOR_MUTED = '#d5d5d5';\nexport const NODE_STROKE_COLOR = '#4a4a4a';\nexport const EDGES_STROKE_COLOR = '#4a4a4a';\nexport const EDGES_STROKE_COLOR_MUTED = '#bababa';\n","import Component from './Component';\nimport {\n    EDGES_STROKE_COLOR,\n    EDGES_STROKE_COLOR_MUTED\n} from './DiagramDefaults';\n\nclass DiagramEdge extends Component {\n    constructor() {\n        super('diagram-edge');\n    }\n\n    _setData(container, data) {\n        container.selectAll(\"*\").remove();\n\n        this._selected = data.selected;\n        this._muted = data.muted;\n\n        this._renderEdge(data);\n    }\n\n    _renderEdge(data) {\n        const markerEnd = this._muted ? `url(#end-muted)` : `url(#end)`;\n        const strokeColor = this._muted ? EDGES_STROKE_COLOR_MUTED : EDGES_STROKE_COLOR;\n\n        this._edge = this.container.append(\"path\")\n            .attr(\"class\", \"link\")\n            .attr(\"stroke\", strokeColor)\n            .attr(\"stroke-width\", 1)\n            .attr(\"stroke-linejoin\", \"bevel\")\n            .attr(\"fill\", \"transparent\")\n            .attr(\"d\", () => {\n                const d = data.layout.sections[0];\n                let path = \"\";\n                if (d.startPoint && d.endPoint) {\n                    path += `M${d.startPoint.x} ${d.startPoint.y} `;\n\n                    const defaultRadius = 6;\n                    let lastPoint = {\n                        x: d.startPoint.x,\n                        y: d.startPoint.y\n                    };\n\n                    (d.bendPoints || []).forEach((bendPoint, index) => {\n\n                        const nextPoint = d.bendPoints[index + 1] || d.endPoint;\n\n                        const params = this._getSectionParams(\n                            bendPoint,\n                            lastPoint,\n                            nextPoint,\n                            defaultRadius\n                        );\n\n                        const section = this._getSection(params);\n\n                        path += section;\n\n                        lastPoint.x = bendPoint.x;\n                        lastPoint.y = bendPoint.y;\n\n                    }, this);\n\n                    const isEnd = true;\n                    const nextPoint = {};\n                    const params = this._getSectionParams(\n                        d.endPoint,\n                        lastPoint,\n                        nextPoint,\n                        defaultRadius,\n                        isEnd\n                    );\n\n                    const endSection = this._getSection(params);\n\n                    path += endSection;\n                }\n\n                return path;\n            });\n\n        if (data.edge.type == \"arrow\") {\n            this._edge.attr(\"marker-end\", markerEnd);\n        }\n    }\n\n    _getSection(params) {\n        const {x, y, defaultRadius, isEnd} = params;\n\n        let curve = '';\n        let line = '';\n        let radius = defaultRadius;\n\n        const diff = {\n            lastX: x.rounded - x.lastRounded,\n            lastY: y.rounded - y.lastRounded,\n            nextX: x.nextRounded - x.rounded,\n            nextY: y.nextRounded - y.rounded\n        };\n\n        Object.keys(diff).forEach(key => {\n            const abs = Math.abs(diff[key]);\n            if (abs && abs < radius) {\n                radius = abs / 2;\n            }\n        });\n\n        const lineEndCorrection = isEnd ? 0 : radius;\n\n        // DRAW LINE\n        if (diff.lastX > 0) {\n            // to right\n            line = `L ${x.current - lineEndCorrection} ${y.current} `;\n        } else if (diff.lastX < 0) {\n            // to left\n            line = `L ${x.current + lineEndCorrection} ${y.current} `;\n        } else if (diff.lastY > 0) {\n            // to bottom\n            line = `L ${x.current} ${y.current - lineEndCorrection} `;\n        } else if (diff.lastY < 0) {\n            // to top\n            line = `L ${x.current} ${y.current + lineEndCorrection} `;\n        }\n\n        // DRAW CURVE\n        if (!isEnd) {\n            if (diff.nextY > 0) {\n                // to bottom\n                curve = `Q ${x.current} ${y.current} ${x.current} ${y.current + radius} `;\n            } else if (diff.nextY < 0) {\n                // to top\n                curve = `Q ${x.current} ${y.current} ${x.current} ${y.current - radius} `;\n            } else if (diff.nextX < 0) {\n                // to left\n                curve = `Q ${x.current} ${y.current} ${x.current - radius} ${y.current} `;\n            } else if (diff.nextX > 0) {\n                // to right\n                curve = `Q ${x.current} ${y.current} ${x.current + radius} ${y.current} `;\n            }\n        }\n\n        return line.concat(curve);\n    }\n\n    _getSectionParams(\n        point,\n        lastPoint,\n        nextPoint,\n        defaultRadius,\n        isEnd = false\n    ) {\n        return {\n            x: {\n                current: point.x,\n                last: lastPoint.x,\n                next: nextPoint.x,\n                rounded: Math.round(point.x),\n                lastRounded: Math.round(lastPoint.x),\n                nextRounded: Math.round(nextPoint.x)\n            },\n            y: {\n                current: point.y,\n                last: lastPoint.y,\n                next: nextPoint.y,\n                rounded: Math.round(point.y),\n                lastRounded: Math.round(lastPoint.y),\n                nextRounded: Math.round(nextPoint.y)\n            },\n            defaultRadius,\n            isEnd\n        };\n    }\n\n    setSelected(value) {\n        this._selected = value;\n    }\n\n    setMuted(value) {\n        this._muted = value;\n    }\n\n    setStyle() {\n        if (this._muted) {\n            this._edge.attr('stroke', EDGES_STROKE_COLOR_MUTED);\n            this._edge.attr(\"marker-end\", \"url(#end-muted)\");\n        } else {\n            this._edge.attr('stroke', EDGES_STROKE_COLOR);\n            this._edge.attr(\"marker-end\", \"url(#end)\");\n        }\n    }\n}\n\nexport default DiagramEdge;\n","import Component from './Component';\nimport DiagramEdge from './DiagramEdge';\nimport {\n    EDGES_STROKE_COLOR,\n    EDGES_STROKE_COLOR_MUTED\n} from './DiagramDefaults';\n\nclass DiagramEdges extends Component {\n    constructor() {\n        super('diagram-edges');\n    }\n\n    _setData(container, data) {\n        container.selectAll(\"*\").remove();\n\n        this._renderDefs('end', EDGES_STROKE_COLOR);\n        this._renderDefs('end-muted', EDGES_STROKE_COLOR_MUTED);\n\n        this._createEdges(data);\n        this._renderEdges();\n\n        this._data = data;\n        this._subsequentNodes = data.subsequentNodes;\n        this._selected = data.selected;\n\n        data.edges.forEach((edge, index) => this._setEdgeData(edge, index));\n    }\n\n    _createEdges(data) {\n        this._edges = data.edges.map(() => {\n            return new DiagramEdge();\n        });\n    }\n\n    _renderEdges() {\n        this._edges.forEach((edge, index) => {\n            edge.render(this.container.node(), 0, 0, index);\n        });\n    }\n\n    _setEdgeData(edge, index) {\n        const layout = this._data.layout.edges[index];\n\n\n        const selected = this._selected === edge.start;\n        let isSubsequentNode = false;\n\n        if (this._selected) {\n            isSubsequentNode = this._isSubsequentNode(this._selected, edge.start);\n        }\n\n        const muted = this._selected && !(selected || isSubsequentNode);\n\n        this._edges[index].setData({\n            edge,\n            layout,\n            selected,\n            muted\n        });\n    }\n\n    _renderDefs(id, color) {\n        this.container.append(\"svg:defs\")\n            .append(\"svg:marker\")\n            .attr(\"id\", id)\n            .attr(\"viewBox\", \"0 -5 10 10\")\n            .attr(\"refX\", 10)\n            .attr(\"refY\", 0)\n            .attr(\"markerWidth\", 5)\n            .attr(\"markerHeight\", 5)\n            .attr(\"orient\", \"auto\")\n            .style(\"fill\", color)\n            .style(\"stroke-opacity\", 0.6)\n            .append(\"svg:path\")\n            .attr(\"d\", \"M0,-5L10,0L0,5\");\n    }\n\n    selectEdges(name) {\n        this._data.edges.forEach((edge, index) => {\n            const diagramEdge = this._edges[index];\n            const isSubsequentNode = this._isSubsequentNode(name, edge.start);\n            const selected = (name === edge.start) || isSubsequentNode;\n\n            diagramEdge.setSelected(selected);\n            diagramEdge.setMuted(!selected);\n            diagramEdge.setStyle();\n        });\n    }\n\n    deselectEdges(isSomeHighlighted) {\n        this._data.edges.forEach((edge, index) => {\n            const diagramEdge = this._edges[index];\n            const muted = isSomeHighlighted && diagramEdge._muted;\n\n            diagramEdge.setMuted(muted);\n            diagramEdge.setSelected(false);\n            diagramEdge.setStyle();\n        });\n    }\n\n    highlightEdges(name) {\n        this._data.edges.forEach((edge, index) => {\n            const diagramEdge = this._edges[index];\n            const isSubsequentNode = this._isSubsequentNode(name, edge.start);\n            const highlighted = (name === edge.start) || isSubsequentNode;\n\n            diagramEdge.setMuted(!highlighted);\n            diagramEdge.setStyle();\n        });\n    }\n\n    unhighlightEdges(isSomeSelected) {\n        this._data.edges.forEach((edge, index) => {\n            const diagramEdge = this._edges[index];\n            const muted = isSomeSelected && !diagramEdge._selected;\n\n            diagramEdge.setMuted(muted);\n            diagramEdge.setStyle();\n        });\n    }\n\n    _isSubsequentNode(nodeName, edgeStart) {\n        const subsequentNodes = this._subsequentNodes[nodeName];\n        return subsequentNodes.indexOf(edgeStart) >= 0;\n    }\n}\n\nexport default DiagramEdges;\n","import style from \"./CleverDiagram.css\";\nimport Component from './Component';\nimport {\n    NODE_HEIGHT,\n    ICON_FONT_SIZE,\n    NODE_SELECTED_BG,\n    NODE_DEFAULT_BG,\n    NODE_MUTED_BG,\n    NODE_GROUP_COLOR_MUTED,\n    NODE_GROUP_WIDTH,\n    NODE_STROKE_COLOR,\n    NODE_NAME_FONT_SIZE,\n    NODE_ICON_COLOR,\n    NODE_NAME_COLOR,\n    EDGES_STROKE_COLOR_MUTED\n} from './DiagramDefaults';\n\nclass DiagramNode extends Component {\n    constructor(\n        {\n            nodeWidth,\n            iconFontFamily\n        }\n    ) {\n        super('diagram-node');\n        this._nodeWidth = nodeWidth;\n        this._iconFontFamily = iconFontFamily;\n\n        this._observable\n            .add(\"enterNode\");\n    }\n\n    _setData(container, data) {\n        container.selectAll(\"*\").remove();\n\n        this._node = data.node;\n        this._selected = data.selected;\n        this._selectedMuted = data.selectedMuted;\n        this._selectedSubsequent = data.selectedSubsequent;\n        this._styles = data.styles;\n        this._groupColor = data.groupColor;\n\n        this._renderAll();\n    }\n\n    _renderAll() {\n        this._renderGradients();\n        this._renderNodeBaseLayer();\n        this._renderNodeSkeleton();\n\n        if (this._node.icon) {\n            this._renderIcon();\n        }\n\n        this._renderLine();\n        this._setNodeStyle();\n        this._rendertNodeName();\n    }\n\n    _renderGradients() {\n        this._gradientEdge = NODE_GROUP_WIDTH/this._nodeWidth;\n\n        this._defs = this.container.append(\"svg:defs\");\n\n        this._renderDefaultGradient();\n        this._renderMutedGradient();\n    }\n\n    _renderDefaultGradient() {\n        const colorDefaultBg = NODE_DEFAULT_BG;\n\n        this._defaultGradient = this._defs\n            .append(\"svg:linearGradient\")\n            .attr(\"id\", `node-background-default-${this._node.name}`);\n\n        this._defaultGradient.selectAll(\"stop\")\n            .data([\n                { offset: \"0\", color: this._groupColor, opacity: '0.4'},\n                { offset: this._gradientEdge, color: this._groupColor, opacity: '0.4'},\n                { offset: this._gradientEdge + 0.001, color: colorDefaultBg, opacity: '1'},\n                { offset: \"1\", color: colorDefaultBg, opacity: '1'}\n            ])\n            .enter().append(\"stop\")\n            .attr(\"offset\", data => data.offset)\n            .attr(\"stop-color\", data => data.color)\n            .attr(\"stop-opacity\", data => data.opacity);\n    }\n\n    _renderMutedGradient() {\n        const colorMutedBg = NODE_MUTED_BG;\n        const colorGroupMuted= NODE_GROUP_COLOR_MUTED;\n\n        this._mutedGradient = this._defs\n            .append(\"svg:linearGradient\")\n            .attr(\"id\", \"node-background-muted\");\n\n        this._mutedGradient.selectAll(\"stop\")\n            .data([\n                { offset: \"0\", color: colorGroupMuted, opacity: '1'},\n                { offset: this._gradientEdge, color: colorGroupMuted, opacity: '1'},\n                { offset: this._gradientEdge + 0.001, color: colorMutedBg, opacity: '1'},\n                { offset: \"1\", color: colorMutedBg, opacity: '1'}\n            ])\n            .enter().append(\"stop\")\n            .attr(\"offset\", data => data.offset)\n            .attr(\"stop-color\", data => data.color)\n            .attr(\"stop-opacity\", data => data.opacity);\n    }\n\n    _renderNodeBaseLayer() {\n        this._nodeBaseLayer = this.container\n            .append(\"rect\")\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._styles.width)\n            .attr(\"height\", this._styles.height)\n            .attr(\"fill\", \"white\")\n            .attr(\"rx\", 5);\n    }\n\n    _renderNodeSkeleton() {\n        this._nodeSkeleton = this.container\n            .append(\"rect\")\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._styles.width)\n            .attr(\"height\", this._styles.height)\n            .attr(\"fill\", `url(#node-background-default-${this._node.name})`)\n            .attr(\"rx\", 5)\n            .attr(\"stroke\", NODE_STROKE_COLOR)\n            .attr(\"stroke-width\", 1)\n            .attr(\"class\", style['node-skeleton'])\n            .attr(\"id\", this._node.name);\n    }\n\n    _renderIcon() {\n        this._icon = this.container.append(\"text\")\n            .attr(\"x\", NODE_GROUP_WIDTH/2)\n            .attr(\"y\", (this._styles.height/2 + ICON_FONT_SIZE/2) - 1)\n            .attr(\"class\", style['node-icon'])\n            .attr(\"font-family\", this._iconFontFamily)\n            .attr(\"font-size\", ICON_FONT_SIZE)\n            .attr(\"fill\", NODE_ICON_COLOR)\n            .text(this._node.icon);\n    }\n\n    _renderLine() {\n        this._line = this.container\n            .append(\"line\")\n            .attr(\"x1\", NODE_GROUP_WIDTH)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", NODE_GROUP_WIDTH)\n            .attr(\"y2\", NODE_GROUP_WIDTH)\n            .attr(\"stroke\", NODE_STROKE_COLOR)\n            .attr(\"stroke-width\", 1)\n            .attr(\"opacity\", 0);\n    }\n\n    _setNodeStyle() {\n        if (this._selected) {\n            this._setSpecialStyle(NODE_SELECTED_BG, 1);\n        } else if (this._highlighted) {\n            this._setSpecialStyle(this._groupColor, 0.4);\n        } else if (!this._highlightedSubsequent && (this._selectedMuted || this._highlightedMuted)) {\n            this._setMutedStyle();\n        } else {\n            this._setOriginalStyle();\n        }\n    }\n\n    _rendertNodeName() {\n        this._clipPath = this._defs\n            .append(\"clipPath\")\n            .attr(\"id\", \"node-name-mask\");\n\n        this._nodeNameMask = this._clipPath\n            .append(\"rect\")\n            .attr(\"x\", NODE_GROUP_WIDTH + 15)\n            .attr(\"y\", 0)\n            .attr(\"width\", this._nodeWidth - NODE_GROUP_WIDTH - 25)\n            .attr(\"height\", this._styles.height);\n\n        this._nodeName = this.container\n            .append(\"g\")\n            .attr(\"clip-path\", \"url(#node-name-mask)\")\n            .append(\"text\")\n            .text(this._node.name)\n            .attr(\"x\", NODE_GROUP_WIDTH + 15)\n            .attr(\"y\", (NODE_HEIGHT/2 + NODE_NAME_FONT_SIZE/2) - 2)\n            .attr(\"font-size\", NODE_NAME_FONT_SIZE)\n            .attr(\"fill\", NODE_NAME_COLOR)\n            .attr(\"class\", style[\"node-name\"]);\n    }\n\n    setStyle() {\n        this._setNodeStyle();\n    }\n\n    isSelected() {\n        return this._selected;\n    }\n\n    isSelectedSubsequent() {\n        return this._selectedSubsequent;\n    }\n\n    isHighlighted() {\n        return this._highlighted;\n    }\n\n    setSelected(value) {\n        this._selected = value;\n    }\n\n    setSelectedSubsequent(value) {\n        this._selectedSubsequent = value;\n    }\n\n    setHighlighted(value) {\n        this._highlighted = value;\n    }\n\n    setHighlightedSubsequent(value) {\n        this._highlightedSubsequent = value;\n    }\n\n    setSelectedMuted(value) {\n        this._selectedMuted = value;\n    }\n\n    setHighlightedMuted(value) {\n        this._highlightedMuted = value;\n    }\n\n    _setSpecialStyle(color, opacity) {\n        this._nodeSkeleton\n            .attr(\"fill\", color)\n            .attr(\"fill-opacity\", opacity)\n            .attr(\"stroke\", NODE_STROKE_COLOR);\n        this._line.attr(\"opacity\", \"1\");\n    }\n\n    _setMutedStyle() {\n        this._nodeSkeleton\n            .attr(\"fill\", \"url(#node-background-muted\")\n            .attr(\"fill-opacity\", \"1\")\n            .attr(\"stroke\", EDGES_STROKE_COLOR_MUTED);\n        this._line.attr(\"opacity\", \"0\");\n    }\n\n    _setOriginalStyle() {\n        this._nodeSkeleton\n            .attr(\"fill\", `url(#node-background-default-${this._node.name})`)\n            .attr(\"fill-opacity\", \"1\")\n            .attr(\"stroke\", NODE_STROKE_COLOR);\n        this._line.attr(\"opacity\", \"0\");\n    }\n\n    get styles() {\n        return this._styles;\n    }\n\n    get name() {\n        return this._node.name;\n    }\n}\n\nexport default DiagramNode;\n","import Component from './Component';\nimport DiagramNode from './DiagramNode';\nimport {NODE_GROUP_COLOR_DEFAULT} from './DiagramDefaults';\n\nclass DiagramNodes extends Component {\n    constructor(\n        {\n            nodeWidth,\n            iconFontFamily,\n            mouseControl\n        }\n    ) {\n        super('diagram-nodes');\n\n        this._nodeWidth = nodeWidth;\n        this._iconFontFamily = iconFontFamily;\n        this._mouseControl = mouseControl;\n\n        this._observable\n            .add(\"selectNode\")\n            .add(\"deselectNode\")\n            .add(\"highlightNode\")\n            .add(\"unhighlightNode\");\n    }\n\n    _setData(container, data) {\n        container.selectAll(\"*\").remove();\n\n        this._dataNodes = data.nodes;\n        this._dataEdges = data.edges;\n        this._layout = data.layout;\n        this._groupColors = data.groupColors;\n        this._selected = data.selected;\n        this._subsequentNodes = data.subsequentNodes;\n\n        this._createNodes(data);\n        this._renderNodes();\n\n        data.nodes.forEach((node, index) => this._setNodeData(node, index));\n    }\n\n    _createNodes(data) {\n        this._nodes = data.nodes.map(() => {\n            return new DiagramNode({\n                nodeWidth: this._nodeWidth,\n                iconFontFamily: this._iconFontFamily\n            });\n        });\n    }\n\n    _renderNodes() {\n        this._nodes.forEach((node, index) => {\n            const name = this._dataNodes[index].name;\n            const styles = this._getStyles(this._layout.children[index]);\n            node.render(this.container.node(), styles.x, styles.y, index);\n            if (this._mouseControl) {\n                node\n                    .on(\"click\", (index) => {\n                        if (this._nodes[index].isSelected()) {\n                            this._observable.fire(\"deselectNode\", name);\n                        } else {\n                            this._observable.fire(\"selectNode\", name);\n                        }\n                    })\n                    .on(\"enter\", () => {\n                        this._enterTimeout = setTimeout(() => {\n                            this._observable.fire(\"highlightNode\", name);\n                        }, 150);\n                    })\n                    .on(\"leave\", () => {\n                        clearTimeout(this._enterTimeout);\n                        this._observable.fire(\"unhighlightNode\");\n                    });\n            }\n        });\n    }\n\n    selectNode(name) {\n        const subsequentNodes = this._subsequentNodes[name];\n\n        this._dataNodes.forEach((node, index) => {\n            const diagramNode = this._nodes[index];\n            const isSubsequentNode = subsequentNodes.indexOf(node.name) >= 0;\n            const selected = name === node.name;\n            const muted = !(selected || isSubsequentNode);\n\n            diagramNode.setSelected(selected);\n            diagramNode.setSelectedSubsequent(isSubsequentNode);\n            diagramNode.setSelectedMuted(muted);\n            diagramNode.setStyle();\n        });\n    }\n\n    deselectNode() {\n        this._dataNodes.forEach((node, index) => {\n            const diagramNode = this._nodes[index];\n\n            diagramNode.setSelected(false);\n            diagramNode.setSelectedMuted(false);\n            diagramNode.setStyle();\n        });\n\n    }\n\n    highlightNode(name) {\n        const subsequentNodes = this._subsequentNodes[name];\n\n        this._dataNodes.forEach((node, index) => {\n            const diagramNode = this._nodes[index];\n            const highlighted = name === node.name;\n            const isSubsequentNode = subsequentNodes.indexOf(node.name) >= 0;\n            const muted = !(highlighted || isSubsequentNode);\n\n            diagramNode.setHighlighted(highlighted);\n            diagramNode.setHighlightedSubsequent(isSubsequentNode);\n            diagramNode.setHighlightedMuted(muted);\n            diagramNode.setStyle();\n        });\n    }\n\n    unhighlightNode() {\n        this._nodes.forEach((diagramNode) => {\n            diagramNode.setHighlighted(false);\n            diagramNode.setHighlightedSubsequent(false);\n            diagramNode.setHighlightedMuted(false);\n            diagramNode.setStyle();\n        });\n    }\n\n    _setNodeData(node, index) {\n        const styles = this._getStyles(this._layout.children[index]);\n        const groupColor = this._groupColors[node.group] || NODE_GROUP_COLOR_DEFAULT;\n        const selected = this._selected === node.name;\n        let selectedMuted, selectedSubsequent = false;\n\n        if (this._selected) {\n            const subsequentNodes = this._subsequentNodes[this._selected];\n            const isSubsequentNode = subsequentNodes && subsequentNodes.indexOf(node.name) >= 0;\n            selectedMuted = !isSubsequentNode;\n            selectedSubsequent = isSubsequentNode;\n        }\n\n        this._nodes[index].setData({\n            node,\n            selected,\n            selectedSubsequent,\n            selectedMuted,\n            styles,\n            groupColor\n        });\n    }\n\n    _getStyles(layout) {\n        return {\n            y: layout.y,\n            x: layout.x,\n            width: layout.width,\n            height: layout.height\n        };\n    }\n\n    isSomeSelected() {\n        return this._nodes.some(node => node.isSelected());\n    }\n\n    isSomeHighlighted() {\n        return this._nodes.some(node => node.isHighlighted());\n    }\n\n    getNodeByName(name) {\n        return this._nodes.find(node => node.name === name);\n    }\n}\n\nexport default DiagramNodes;\n","import style from \"./CleverDiagram.css\";\nimport * as d3 from \"d3\";\nimport * as ELK from \"ELK\";\nimport Component from './Component';\nimport DiagramEdges from './DiagramEdges';\nimport DiagramNodes from './DiagramNodes';\nimport {\n    NODE_WIDTH,\n    NODE_HEIGHT,\n    MOUSE_CONTROL,\n    DIAGRAM_MARGIN\n} from './DiagramDefaults';\n\n/**\n * @class\n * Main Diagram class\n * @param {Object} options\n */\nclass Diagram extends Component {\n    constructor({\n        nodeWidth = NODE_WIDTH,\n        nodeHeight = NODE_HEIGHT,\n        groupColors = {},\n        elkWorkerUrl,\n        mouseControl = MOUSE_CONTROL,\n        iconFontFamily,\n        zoomable = true,\n        diagramMargin = DIAGRAM_MARGIN\n    }) {\n        super('diagram');\n\n        this._nodeWidth = nodeWidth;\n        this._nodeHeight = nodeHeight;\n        this._groupColors = groupColors;\n        this._elkWorkerUrl = elkWorkerUrl;\n        this._mouseControl = mouseControl;\n        this._iconFontFamily = iconFontFamily;\n        this._zoomable = zoomable;\n        this._diagramMargin = diagramMargin;\n\n        this._hasRenderedNodes = false;\n        this._currentScale = 1;\n        this._transitionDuration = 200;\n\n        this._elk = new ELK({\n            workerUrl: this._elkWorkerUrl\n        });\n\n        this._observable\n            .add(\"selectNode\")\n            .add(\"deselectNode\")\n            .add(\"highlightNode\")\n            .add(\"unhighlightNode\")\n            .add(\"zoom\");\n    }\n\n    _renderContainer(selector, x = 0, y = 0) {\n        this._svgContainer = d3.select(selector).append(\"svg\");\n\n        return this._svgContainer.append(\"g\")\n            .attr(\"class\", style[this.className])\n            .attr(\"transform\", `translate(${x}, ${y})`);\n    }\n\n    _setData(container, data) {\n        container.selectAll(\"*\").remove();\n\n        this._dataEdges = data.edges || [];\n        this._dataNodes = data.nodes || [];\n        this._data = data;\n\n        return this._renderElk();\n    }\n\n    _renderElk() {\n        const graph = this._getElkGraph();\n\n        return this._elk.layout(graph).then(layout => {\n            const subsequentNodes = this._getSubsequentNodes(this._data);\n\n            this._renderEdges(layout, subsequentNodes);\n            this._renderNodes(layout, subsequentNodes);\n\n            this._graphSize = this._getGraphSize(layout.children, layout.edges);\n\n            if (!this._zoomable) {\n                this._setGraphSize(this._graphSize);\n            } else {\n                this._doZoom();\n                this._moveGraph();\n            }\n\n            this._hasRenderedNodes = true;\n        });\n    }\n\n    _getElkGraph() {\n        return {\n            \"id\": \"root\",\n            properties: this._getRootProperties(),\n            \"children\": this._dataNodes.map(node => {\n                return {\n                    id: node.name,\n                    width: this._nodeWidth,\n                    height: this._nodeHeight\n                };\n            }),\n            \"edges\": this._dataEdges.map((edge, index) => {\n                return {\n                    id: \"edge_\" + index,\n                    sources: [edge.start],\n                    targets: [edge.end]\n                };\n            })\n        };\n    }\n\n    _getRootProperties(){\n        return {\n            'algorithm': 'layered',\n            'direction':'RIGHT'\n        };\n    }\n\n    _getSubsequentNodes(data) {\n        return data.nodes.reduce((obj, item) => {\n            const edges = this._findEdgesRecursive(data.edges, [item.name]);\n            obj[item.name] = edges.map(edge => edge.end);\n            return obj;\n        }, {});\n    }\n\n    _findEdgesRecursive(edges, names, alreadySearched=[]) {\n        let results = names.reduce((acc, cur) => {\n            if (alreadySearched.indexOf(cur) >= 0) {\n                return acc;\n            }\n\n            const filteredEdges = edges.filter(edge => edge.start === cur);\n\n            return acc.concat(filteredEdges);\n        }, []);\n\n        const namesToFind = results.map(result => result.end);\n        alreadySearched = alreadySearched.concat(names);\n\n        if (namesToFind.length) {\n            return results.concat(this._findEdgesRecursive(this._dataEdges, namesToFind, alreadySearched));\n        }\n\n        return results;\n    }\n\n    _getGraphSize(nodes, edges) {\n        const edgesWithBendPoints = edges.flatMap(edge => edge.sections.filter(section => section.bendPoints));\n        const bendPointsYs = edgesWithBendPoints.flatMap(edge => edge.bendPoints.flatMap(bendPoint => bendPoint.y));\n        const maxEdgesY = Math.max.apply(Math, bendPointsYs);\n        const maxNodesY = Math.max.apply(Math, nodes.map(node => node.y + node.height));\n\n        const height = Math.max(maxEdgesY, maxNodesY) + 10;\n        const width = Math.max.apply(Math, nodes.map(node => node.x + node.width)) + 10;\n\n        return {width, height};\n    }\n\n    _setGraphSize({width, height}) {\n        this._svgContainer.style(\"width\", `${width}px`);\n        this._svgContainer.style(\"height\", `${height}px`);\n    }\n\n    _moveGraph() {\n        const {x, y} = this._getTranslatePosition(1);\n        this._svgContainer.call(\n            this._zoom.transform,\n            d3.zoomIdentity.translate(x, y)\n        );\n    }\n\n    _getTranslatePosition(scale) {\n        const getOffset = (dimension, scale) => ((this._svgSize[dimension] - (this._graphSize[dimension] * scale)) / 2);\n        const offsetX = getOffset('width', scale);\n        const offsetY = getOffset('height', scale);\n\n        return {\n            x: Math.max(offsetX, this._diagramMargin),\n            y: Math.max(offsetY, this._diagramMargin)\n        };\n    }\n\n    _doZoom() {\n        this._svgSize = this._svgContainer.node().getBoundingClientRect();\n\n        this._svgContainer.classed(style.zoomable, true);\n\n        this._zoomOutScaleWidth = this._getZoomOutScale(this._graphSize.width, this._svgSize.width - (this._diagramMargin * 2));\n        this._zoomOutScaleHeight = this._getZoomOutScale(this._graphSize.height, this._svgSize.height - (this._diagramMargin * 2));\n\n        this._zoomOutScale = Math.min(this._zoomOutScaleWidth, this._zoomOutScaleHeight);\n\n        this._zoom = d3.zoom()\n            .extent([[0, 0], [this._svgSize.width, this._svgSize.height]])\n            .scaleExtent([this._zoomOutScale, 1]);\n\n        this._zoom.on(\"zoom\", this._zoomHandler.bind(this));\n        this._svgContainer.call(this._zoom);\n    }\n\n    _getZoomOutScale(size, max) {\n        if (size > max) {\n            return max / size;\n        }\n        return 1;\n    }\n\n    _zoomHandler() {\n        this._currentScale = d3.event.transform.k;\n        const {x, y, k} = d3.event.transform;\n        this._observable.fire(\"zoom\", {x, y, k});\n    }\n\n    _renderEdges(layout, subsequentNodes) {\n        const data = {\n            layout,\n            edges: this._dataEdges,\n            subsequentNodes,\n            selected: this._data.selected,\n        };\n        this._edges = new DiagramEdges();\n        this._edges.render(this.container.node());\n        this._edges.setData(data);\n    }\n\n    _renderNodes(layout, subsequentNodes) {\n        const data = {\n            nodes: this._data.nodes,\n            edges: this._data.edges,\n            selected: this._data.selected,\n            layout,\n            groupColors: this._groupColors,\n            subsequentNodes\n        };\n        this._nodes = new DiagramNodes({\n            nodeWidth: this._nodeWidth,\n            iconFontFamily: this._iconFontFamily,\n            mouseControl: this._mouseControl\n        });\n\n        this._nodes.render(this.container.node())\n            .on(\"selectNode\", (name) => {\n                this._observable.fire(\"selectNode\", name);\n            })\n            .on(\"deselectNode\", (name, highlightDeselected) => {\n                this._observable.fire(\"deselectNode\", name, highlightDeselected);\n            })\n            .on(\"highlightNode\", (name) => {\n                this._observable.fire(\"highlightNode\", name);\n            })\n            .on(\"unhighlightNode\", (name) => {\n                this._observable.fire(\"unhighlightNode\", name);\n            });\n\n        this._nodes.setData(data);\n    }\n\n    hasRenderedNodes() {\n        return this._hasRenderedNodes;\n    }\n\n    selectNode(name) {\n        this._nodes.selectNode(name);\n        this._edges.selectEdges(name);\n    }\n\n    deselectNode(name) {\n        const isSomeHighlighted = this._nodes.isSomeHighlighted();\n        this._nodes.deselectNode(name);\n        this._edges.deselectEdges(isSomeHighlighted);\n    }\n\n    highlightNode(name) {\n        this._nodes.highlightNode(name);\n        this._edges.highlightEdges(name);\n    }\n\n    unhighlightNode() {\n        const isSomeSelected = this._nodes.isSomeSelected();\n        this._nodes.unhighlightNode();\n        this._edges.unhighlightEdges(isSomeSelected);\n    }\n\n    centerNode(name) {\n        const node = this._nodes.getNodeByName(name);\n        if (!this._zoomable) {\n            return;\n        }\n\n        const defaultPosition = {\n            x: node.styles.x,\n            y: node.styles.y\n        };\n        const x = this._svgSize.width / 2 - (defaultPosition.x + (NODE_WIDTH / 2)) * this._currentScale;\n        const y = this._svgSize.height / 2 - (defaultPosition.y + (NODE_HEIGHT / 2)) * this._currentScale;\n\n        this._svgContainer.transition().duration(this._transitionDuration).call(\n            this._zoom.transform,\n            d3.zoomIdentity.translate(x, y).scale(this._currentScale)\n        );\n    }\n\n    centerNodeIfOutOfView(name) {\n        if (!this.isNodeOutOfView(name)) {\n            return;\n        }\n\n        this.centerNode(name);\n    }\n\n    isNodeOutOfView(name) {\n        const node = this._nodes.getNodeByName(name);\n        const currentPosition = node.container.node().getBoundingClientRect();\n        const nodeOffset = {\n            top: currentPosition.top - this._svgSize.top,\n            bottom: currentPosition.top + NODE_HEIGHT,\n            left: currentPosition.left - this._svgSize.left,\n            right: currentPosition.left + NODE_WIDTH\n        };\n\n        return (\n            nodeOffset.bottom > this._svgSize.height ||\n            nodeOffset.top < 0 ||\n            nodeOffset.right > this._svgSize.width ||\n            nodeOffset.left < 0\n        );\n    }\n\n    setTransform(transform) {\n        this._container.attr(\"transform\", `translate(${transform.x}, ${transform.y}), scale(${transform.k})`);\n    }\n\n    setZoom(targetScale) {\n        if (!this._zoomable) {\n            return;\n        }\n        this._zoom.scaleTo(\n            this._svgContainer.transition().duration(this._transitionDuration),\n            targetScale\n        );\n    }\n\n    setFullExtent() {\n        if (!this._zoomable) {\n            return;\n        }\n\n        const {x, y, k} = this.getZoomFullExtentTransform();\n        this._svgContainer.transition().duration(this._transitionDuration).call(\n            this._zoom.transform,\n            d3.zoomIdentity.translate(x, y).scale(k)\n        );\n    }\n\n    getZoomFullExtentTransform() {\n        const {x, y} = this._getTranslatePosition(this._zoomOutScale);\n        return {\n            x, y, k: this._zoomOutScale\n        };\n    }\n\n    reloadZoom() {\n        if (!this._zoom) {\n            return;\n        }\n\n        this._zoom.on(\"zoom\", null);\n\n        const lastScale = this._currentScale;\n        this._doZoom();\n\n        if (lastScale < this._zoomOutScale) {\n            this.setFullExtent();\n        }\n    }\n\n    _clearData() {\n        if (this._zoom) {\n            this._zoom.on(\"zoom\", null);\n        }\n        this._dataEdges = null;\n        this._dataNodes = null;\n        this._edges = null;\n        this._nodes = null;\n        this._elk = null;\n    }\n}\n\nexport default Diagram;\n"],"names":["Observable","events","_handlers","reduce","acc","cur","event","handler","this","push","handlers","index","indexOf","splice","args","i","length","apply","Component","className","_container","_className","_observable","_svg","eventName","on","off","selector","x","y","d3","append","attr","style","destroy","_renderContainer","datum","fire","isRendered","clearData","remove","_clearData","_data","data","_setData","NODE_WIDTH","NODE_HEIGHT","DiagramEdge","container","selectAll","_selected","selected","_muted","muted","_renderEdge","markerEnd","strokeColor","_edge","d","layout","sections","path","startPoint","endPoint","lastPoint","bendPoints","forEach","bendPoint","nextPoint","params","_this2","_getSectionParams","section","_getSection","endSection","edge","type","defaultRadius","isEnd","curve","line","radius","diff","rounded","lastRounded","nextRounded","keys","abs","Math","key","lineEndCorrection","lastX","current","lastY","nextY","nextX","concat","point","round","value","DiagramEdges","_renderDefs","_createEdges","_renderEdges","_subsequentNodes","subsequentNodes","edges","_setEdgeData","_edges","map","render","_this3","node","start","isSubsequentNode","_isSubsequentNode","setData","id","color","name","diagramEdge","_this4","setSelected","setMuted","setStyle","isSomeHighlighted","_this5","_this6","highlighted","isSomeSelected","_this7","nodeName","edgeStart","DiagramNode","nodeWidth","iconFontFamily","_nodeWidth","_iconFontFamily","add","_node","_selectedMuted","selectedMuted","_selectedSubsequent","selectedSubsequent","_styles","styles","_groupColor","groupColor","_renderAll","_renderGradients","_renderNodeBaseLayer","_renderNodeSkeleton","icon","_renderIcon","_renderLine","_setNodeStyle","_rendertNodeName","_gradientEdge","_defs","_renderDefaultGradient","_renderMutedGradient","_defaultGradient","offset","opacity","enter","_mutedGradient","_nodeBaseLayer","width","height","_nodeSkeleton","_icon","NODE_GROUP_WIDTH","ICON_FONT_SIZE","text","_line","_setSpecialStyle","_highlighted","_highlightedSubsequent","_highlightedMuted","_setOriginalStyle","_setMutedStyle","_clipPath","_nodeNameMask","_nodeName","NODE_NAME_FONT_SIZE","DiagramNodes","mouseControl","_mouseControl","_dataNodes","nodes","_dataEdges","_layout","_groupColors","groupColors","_createNodes","_renderNodes","_setNodeData","_nodes","_getStyles","children","isSelected","_enterTimeout","setTimeout","diagramNode","setSelectedSubsequent","setSelectedMuted","setHighlighted","setHighlightedSubsequent","setHighlightedMuted","group","some","isHighlighted","find","nodeHeight","elkWorkerUrl","zoomable","diagramMargin","_nodeHeight","_elkWorkerUrl","_zoomable","_diagramMargin","_hasRenderedNodes","_currentScale","_transitionDuration","_elk","ELK","_this","_svgContainer","_renderElk","graph","_getElkGraph","then","_getSubsequentNodes","_graphSize","_getGraphSize","_doZoom","_moveGraph","_setGraphSize","_getRootProperties","end","obj","item","_findEdgesRecursive","names","alreadySearched","results","filteredEdges","filter","namesToFind","result","edgesWithBendPoints","flatMap","bendPointsYs","maxEdgesY","max","maxNodesY","_getTranslatePosition","call","_zoom","transform","translate","scale","getOffset","dimension","_svgSize","offsetX","offsetY","getBoundingClientRect","classed","_zoomOutScaleWidth","_getZoomOutScale","_zoomOutScaleHeight","_zoomOutScale","min","extent","scaleExtent","_zoomHandler","bind","size","k","highlightDeselected","selectNode","selectEdges","deselectNode","deselectEdges","highlightNode","highlightEdges","unhighlightNode","unhighlightEdges","getNodeByName","defaultPosition","transition","duration","isNodeOutOfView","centerNode","currentPosition","nodeOffset","top","left","bottom","right","targetScale","scaleTo","getZoomFullExtentTransform","lastScale","setFullExtent"],"mappings":"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"}