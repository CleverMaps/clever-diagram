{"version":3,"file":"diagram.min.js","sources":["../src/utils/Observable.js","../src/Diagram.js"],"sourcesContent":["/**\r\n * @class\r\n * Observable class, handles binding and firing events\r\n * @param {Array} events list of events for this observable\r\n */\r\nexport default class Observable {\r\n    /**\r\n     * @param {Array} events\r\n     */\r\n    constructor(events = []) {\r\n        // create a map of handlers where each event has an array of bound handlers\r\n        this._handlers = events.reduce((acc, cur)=>{\r\n            acc[cur] = [];\r\n            return acc;\r\n        },{});\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Bind event\r\n\t * @param {String} event event name\r\n\t * @param {Function} handler event handler\r\n\t */\r\n    on(event, handler) {\r\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tthis._handlers[event].push(handler);\r\n\t\treturn this;\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Unbind event\r\n\t * @param {String} event event name\r\n\t * @param {Function} [handler] event handler, optional\r\n\t */\r\n    off(event, handler) {\r\n        if (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tif (!handler) {\r\n\t\t\tthis._handlers[event] = [];\r\n\t\t} else {\r\n\t\t\tvar handlers = this._handlers[event];\r\n\t\t\tvar index = handlers.indexOf(handler);\r\n\t\t\tif (index != -1){\r\n\t\t\t\thandlers.splice(index, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Fire widget event\r\n\t * @param {String} event event name\r\n\t * @param {*} ...args event arguments\r\n\t */\r\n\tfire(event, ...args) {\r\n\t\tif (!(event in this._handlers)) throw \"No such event: \" + event;\r\n\t\tvar handlers = this._handlers[event];\r\n\t\tfor (var i = 0; i < handlers.length; i++) {\r\n\t\t\thandlers[i].apply(this, args);\r\n\t\t}\r\n\t\treturn this;\r\n    }\r\n\r\n\t/**\r\n\t * @public\r\n\t * Destorys this observable, removes events and so on \r\n\t */\r\n\tdestroy() {\r\n\t\tthis._handlers = null;\r\n\t\treturn this;\r\n    }\r\n\t\r\n}","import Observable from \"./utils/Observable\";\r\nimport style from \"./Diagram.css\";\r\nimport * as d3 from \"d3\";\r\nimport * as jsPlumb from \"jsPlumb\";\r\nimport * as $klay from \"$klay\";\r\n\r\n/**\r\n * @class\r\n * Main Diagram class\r\n * @param {Object} options\r\n */\r\nexport default class Diagram {\r\n\tconstructor(options) {\r\n\t\t/**\r\n\t\t * @private\r\n\t\t * observable handler\r\n\t\t */\r\n\t\tthis._observable = new Observable([\r\n\t\t\t/**\r\n\t\t\t * @event \r\n\t\t\t * Fires when node is selected\r\n\t\t\t * @param {String} node name\r\n\t\t\t */\r\n\t\t\t\"nodeSelected\",\r\n\t\t\t/**\r\n\t\t\t * @event \r\n\t\t\t * Fires when node is selected\r\n\t\t\t * @param {String} node name\r\n\t\t\t */\r\n\t\t\t\"nodeDeselected\",\t\t\t\r\n\t\t\t/**\r\n\t\t\t * @event \r\n\t\t\t * Fires when node is highlighted\r\n\t\t\t * @param {String} node name\r\n\t\t\t * @param {Boolean} highlighted\r\n\t\t\t */\r\n\t\t\t\"nodeHighlight\"\r\n\t\t]);\r\n\r\n\t\tthis._options = options || {};\r\n\r\n\t\t/**\r\n\t\t * @private \r\n\t\t * DOM container for diagram\r\n\t\t */\r\n\t\tthis._container = null;\r\n\r\n\t\tthis._groupColors = options.groupColors || {};\r\n\t}\r\n\r\n\t/**\r\n\t * Bind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} handler event handler\r\n\t * @returns {Bar} returns this widget instance\r\n\t */\r\n\ton(eventName, handler) {\r\n\t\tthis._observable.on(eventName, handler);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Unbind widget event\r\n\t * @param {String} event event name\r\n\t * @param {Function} [handler] event handler\r\n\t * @returns {Bar} returns this widget instance\r\n\t */\r\n\toff(eventName, handler) {\r\n\t\tthis._observable.off(eventName, handler);\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * Destroys widget\r\n\t * @returns {Bar} returns this widget instance\r\n\t */\r\n\tdestroy() {\r\n\t\tthis._observable.destroy();\r\n\t\tthis._plumb.clear();\r\n\t\tthis._el.remove();\r\n\t\tthis._group.remove();\r\n\t\treturn this;\r\n\t}\t\r\n\r\n\t/**\r\n\t * Render logic of this widget\r\n\t * @param {String|DOMElement} selector selector or DOM element \r\n\t * @returns {Bar} returns this widget instance\r\n\t */\r\n\trender(selector) {\r\n\t\tthis._container = d3.select(selector);\r\n\t\tthis._plumb = jsPlumb.getInstance();\r\n\r\n\t\tthis._svg = this._container\r\n\t\t\t.append(\"svg\")\r\n\t\t\t.style(\"position\", \"absolute\")\r\n\t\t\t.attr(\"pointer-events\", \"none\");\r\n\r\n\t\tthis._group = this._svg.append(\"g\");\t\t\r\n\r\n\t\t// define an arrow head\r\n\t\tthis._group.append(\"svg:defs\")\r\n\t\t\t.append(\"svg:marker\")\r\n\t\t\t.attr(\"id\", \"end\")\r\n\t\t\t.attr(\"viewBox\", \"0 -5 10 10\")\r\n\t\t\t.attr(\"refX\", 10)\r\n\t\t\t.attr(\"refY\", 0)\r\n\t\t\t.attr(\"markerWidth\", 5)        // marker settings\r\n\t\t\t.attr(\"markerHeight\", 5)\r\n\t\t\t.attr(\"orient\", \"auto\")\r\n\t\t\t.style(\"fill\", \"#546E7A\")\r\n\t\t\t.style(\"stroke-opacity\", 0.6)  // arrowhead color\r\n\t\t\t.append(\"svg:path\")\r\n\t\t\t.attr(\"d\", \"M0,-5L10,0L0,5\");\t\t\t\r\n\r\n\t\tthis._el = this._container.append(\"div\").classed(style.diagram, true);\t\t\t\r\n\t}\r\n\r\n\t_getKlayGraph(){\r\n\t\treturn {\r\n\t\t\t\"id\": \"root\",\r\n\t\t\t\"children\": this._nodes.map(node=>{\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid:node.name,\r\n\t\t\t\t\twidth:200,\r\n\t\t\t\t\theight:50\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\t\"edges\": this._edges.map((edge, index)=>{\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid:\"edge_\"+index,\r\n\t\t\t\t\tsource:edge.start,\r\n\t\t\t\t\ttarget:edge.end\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t_setGraphSize(nodes){\r\n\t\tvar maxHeight = Math.max.apply(Math, nodes.map(node=>node.y+node.height));\r\n\t\tvar maxWidth = Math.max.apply(Math, nodes.map(node=>node.x+node.width));\r\n\r\n\t\tthis._el.style(\"width\", maxWidth+\"px\");\r\n\t\tthis._el.style(\"height\", maxHeight+\"px\");\r\n\r\n\t\tthis._svg.attr(\"width\", maxWidth);\r\n\t\tthis._svg.attr(\"height\", maxHeight);\r\n\t}\r\n\r\n\t/**\r\n\t * Renders nodes\r\n\t */\r\n\t_renderNodes(){\r\n\t\treturn new Promise((success, failure)=>{\r\n\t\t\t$klay.layout({\r\n\t\t\t\tgraph: this._getKlayGraph(),\r\n\t\t\t\toptions:{\r\n\t\t\t\t\tspacing:40,\r\n\t\t\t\t\talgorithm: \"de.cau.cs.kieler.klay.layered\",\r\n\t\t\t\t\tlayoutHierarchy: true,\r\n\t\t\t\t\tintCoordinates: true,\r\n\t\t\t\t\tdirection: \"RIGHT\",\r\n\t\t\t\t\t//thoroughness:50,\r\n\t\t\t\t\t//crossMin:\"LAYER_SWEEP\",\r\n\t\t\t\t\tmergeEdges:false,\r\n\t\t\t\t\t//linearSegmentsDeflectionDampening:0.5,\r\n\t\t\t\t\tlayerConstraint:\"LAST_SEPARATE\",\r\n\t\t\t\t\tnodePlace:\"BRANDES_KOEPF\", // LINEAR_SEGMENTS BRANDES_KOEPF\r\n\t\t\t\t\tnodeLayering: \"NETWORK_SIMPLEX\" // NETWORK_SIMPLEX LONGEST_PATH INTERACTIVE\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (layouted)=>{\r\n\t\t\t\t\tthis._nodes.forEach((node, i)=>{\r\n\t\t\t\t\t\tvar styles = {\r\n\t\t\t\t\t\t\ttop:layouted.children[i].y,\r\n\t\t\t\t\t\t\tleft:layouted.children[i].x,\r\n\t\t\t\t\t\t\twidth:layouted.children[i].width,\r\n\t\t\t\t\t\t\theight:layouted.children[i].height\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis._renderNode(node, styles);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis._renderEdges(layouted);\r\n\t\t\t\t\tthis._setGraphSize(layouted.children);\t\r\n\t\t\t\t\tsuccess();\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\terror: function(error) { \r\n\t\t\t\t\tconsole.log(error); \r\n\t\t\t\t\tfailure();\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Selects node \r\n\t * @param nodeName\r\n\t */\r\n\tselectNode(nodeName){\r\n\t\tvar el = document.getElementById(nodeName);\r\n\t\tif (!el) throw \"Node \"+nodeName + \" doesn't exist or graph hasn't been rendered yet\";\r\n\r\n\t\tvar nodeEl = d3.select(el);\r\n\r\n\t\tvar selectedClass = style[\"node-selected\"];\r\n\r\n\t\tif (!nodeEl.classed(selectedClass)){\r\n\t\t\td3.select(\".\"+selectedClass).classed(selectedClass, false);\r\n\t\t\tnodeEl.classed(selectedClass, true);\r\n\t\t\tthis._observable.fire(\"nodeSelected\", nodeName);\r\n\r\n\t\t\tif (this._selectedNodeName && nodeName != this._selectedNodeName){\r\n\t\t\t\tthis._observable.fire(\"nodeDeselected\", this._selectedNodeName);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._selectedNodeName = nodeName;\r\n\t\t} else {\r\n\t\t\td3.select(\".\"+selectedClass).classed(selectedClass, false);\r\n\t\t\tthis._observable.fire(\"nodeDeselected\", nodeName);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @public\r\n\t * Highlights node \r\n\t * @param nodeName\r\n\t * @param highlighted\r\n\t */\r\n\thighlightNode(nodeName, highlighted){\r\n\t\tvar nodeEl = d3.select(\"#\"+nodeName);\r\n\t\tvar highlightedClass = style[\"node-highlighted\"];\r\n\r\n\t\tif (this._dragging && d3.event.relatedTarget && d3.event.relatedTarget.tagName == \"path\"){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (highlighted){\r\n\t\t\td3.select(\".\"+highlightedClass).classed(highlightedClass, false);\r\n\t\t\tnodeEl.classed(highlightedClass, true);\r\n\t\t\tthis._observable.fire(\"nodeHighlight\", nodeName, highlighted);\r\n\t\t} else {\r\n\t\t\td3.select(\".\"+highlightedClass).classed(highlightedClass, false);\r\n\t\t\tthis._observable.fire(\"nodeHighlight\", nodeName, highlighted);\r\n\t\t}\r\n\t}\r\n\t\r\n\t_onMouseDown(nodeName){\r\n\t\tthis._dragging = true;\r\n\t\t// save box on mouse down so we can compare on mouseup\r\n\t\tthis._mouseDownBB = document.getElementById(nodeName).getBoundingClientRect();\r\n\t}\r\n\r\n\t_onMouseUp(nodeName){\r\n\t\tvar bb = document.getElementById(nodeName).getBoundingClientRect();\r\n\t\t// only call select when bounding box is same\r\n\t\tif (this._mouseDownBB && this._mouseDownBB.top == bb.top && this._mouseDownBB.left == bb.left){\r\n\t\t\tthis.selectNode(nodeName);\r\n\t\t}\r\n\t\tthis._dragging = false;\t\t\r\n\t}\r\n\t/**\r\n\t * Renders node \r\n\t * @param node\r\n\t */\r\n\t_renderNode(node, styles){\r\n\t\tvar color = this._groupColors[node.group] || \"#2196F3\";\r\n\t\tvar styleStr = Object.keys(styles).map(style=>style+\":\"+styles[style]+\"px\").join(\";\")+\"; background-color:\"+color;\r\n\t\tvar nodeEl = this._el\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"style\", styleStr)\r\n\t\t\t.attr(\"class\", style.node)\r\n\t\t\t.attr(\"id\", node.name)\r\n\t\t\t.on(\"mousedown\", ()=>{\r\n\t\t\t\tthis._onMouseDown(node.name);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseup\", ()=>{\r\n\t\t\t\tthis._onMouseUp(node.name);\r\n\t\t\t})\r\n\t\t\t.on(\"mouseover\", ()=>{\r\n\t\t\t\tthis.highlightNode(node.name, true);\r\n\t\t\t}).on(\"mouseout\", ()=>{\r\n\t\t\t\tthis.highlightNode(node.name, false);\r\n\t\t\t});\r\n\r\n\t\tnodeEl\t\r\n\t\t\t.append(\"div\")\r\n\t\t\t.attr(\"class\", style[\"node-text\"])\r\n\t\t\t.html(node.name)\r\n\t}\r\n\r\n\t_getEdgeOverlay(edge){\r\n\t\treturn {\r\n\t\t\t\"arrow\":[ [ \"PlainArrow\", { location:1, width:10, length:10 } ] ],\r\n\t\t\t\"link\":[],\r\n\t\t}[edge.type]\r\n\t}\r\n\r\n\t_renderEdges(layouted){\r\n\t\tif (this._options.editable){\r\n\t\t\tthis._renderEdgesEditable();\r\n\t\t} else {\r\n\t\t\tthis._renderEdgesStatic(layouted);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Renders edges\r\n\t */\r\n\t_renderEdgesEditable(){\r\n\t\tthis._edges.forEach(edge=>{\r\n\t\t\tvar overlay = this._getEdgeOverlay(edge);\r\n\t\t\tthis._plumb.connect({\r\n\t\t\t\tsource:edge.start,\r\n\t\t\t\ttarget:edge.end,\r\n\t\t\t\tanchor:[ \"TopCenter\",\"RightMiddle\",\"BottomCenter\",\"LeftMiddle\" ],\r\n\t\t\t\tendpoint:\"Blank\",\r\n\t\t\t\tpaintStyle:{ stroke:'#546E7A', strokeWidth:2 },\r\n\t\t\t\tconnector :\"Straight\", //\"Flowchart\" \"Straight\",\r\n\t\t\t\toverlays: overlay,\r\n\t\t\t\tendpointStyle:{ fill: \"black\" }\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis._plumb.draggable(document.querySelectorAll(\".\"+style.node));\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * Renders edges\r\n\t */\r\n\t_renderEdgesStatic(layout){\r\n\t\tthis._edges.forEach((edge, i)=>{\r\n\t\t\tvar link = this._group.append(\"path\")\r\n\t\t\t.attr(\"class\", \"link\")\r\n\t\t\t.attr(\"stroke\", \"#546E7A\")\r\n\t\t\t.attr(\"stroke-width\", 2)\r\n\t\t\t.attr(\"fill\", \"transparent\")\r\n\t\t\t.attr(\"d\", ()=>{\r\n\t\t\t\tvar d = layout.edges[i];\r\n\t\t\t\tvar path = \"\";\r\n\t\t\t\tif (d.sourcePoint && d.targetPoint) {\r\n\t\t\t\t\tpath += \"M\" + d.sourcePoint.x + \" \" + d.sourcePoint.y + \" \";\r\n\t\t\t\t\t(d.bendPoints || []).forEach(function(bp, i) {\r\n\t\t\t\t\t\tpath += \"L\" + bp.x + \" \" + bp.y + \" \";\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpath += \"L\" + d.targetPoint.x + \" \" + d.targetPoint.y + \" \";\r\n\t\t\t\t}\r\n\t\t\t\treturn path;\r\n\t\t\t})\r\n\r\n\t\t\tif (edge.type == \"arrow\"){\r\n\t\t\t\tlink.attr(\"marker-end\", \"url(#end)\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t}\t\t\r\n\r\n\t/**\r\n\t * Sets widget data\r\n\t * @param {Array} data\r\n\t * @returns {Bar} returns this widget instance \r\n\t */\r\n\tsetData(data) {\r\n\t\tif (!this._container) throw \"Diagram is not rendered\"\r\n\r\n\t\tthis._el.html(\"\");\r\n\r\n\t\tthis._nodes = data.nodes || [];\r\n\t\tthis._edges = data.edges || [];\r\n\r\n\t\treturn this._renderNodes();\r\n\t}\r\n}\r\n"],"names":["Observable","events","_handlers","reduce","acc","cur","event","handler","this","push","handlers","index","indexOf","splice","args","i","length","apply","options","_observable","_options","_container","_groupColors","groupColors","eventName","on","off","destroy","_plumb","clear","_el","remove","_group","selector","d3","jsPlumb","_svg","append","style","attr","classed","diagram","_nodes","map","node","name","_edges","edge","start","end","nodes","maxHeight","Math","max","y","height","maxWidth","x","width","Promise","success","failure","_this","_getKlayGraph","layouted","forEach","styles","children","_renderNode","_renderEdges","_setGraphSize","error","log","nodeName","el","document","getElementById","nodeEl","selectedClass","fire","_selectedNodeName","highlighted","highlightedClass","_dragging","relatedTarget","tagName","_mouseDownBB","getBoundingClientRect","bb","top","left","selectNode","color","group","styleStr","Object","keys","join","_onMouseDown","_onMouseUp","highlightNode","html","location","type","editable","_renderEdgesEditable","_renderEdgesStatic","overlay","_this3","_getEdgeOverlay","connect","stroke","strokeWidth","fill","draggable","querySelectorAll","layout","link","_this4","d","edges","path","sourcePoint","targetPoint","bendPoints","bp","data","_renderNodes"],"mappings":"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"}